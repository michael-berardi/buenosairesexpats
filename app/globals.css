@import "tailwindcss";
@import "tw-animate-css";
@import "shadcn/tailwind.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

:root {
  --radius: 0.625rem;
  --background: #fafaf9;
  --foreground: #1c1917;
  --card: #ffffff;
  --card-foreground: #1c1917;
  --popover: #ffffff;
  --popover-foreground: #1c1917;
  --primary: #0284c7;
  --primary-foreground: #ffffff;
  --secondary: #f5f5f4;
  --secondary-foreground: #44403c;
  --muted: #f5f5f4;
  --muted-foreground: #44403c;
  --accent: #fbbf24;
  --accent-foreground: #1c1917;
  --destructive: #ef4444;
  --border: #e7e5e4;
  --input: #e7e5e4;
  --ring: #0284c7;
  --chart-1: #0284c7;
  --chart-2: #fbbf24;
  --chart-3: #10b981;
  --chart-4: #f59e0b;
  --chart-5: #8b5cf6;
}

.dark {
  --background: #0c0a09;
  --foreground: #fafaf9;
  --card: #1c1917;
  --card-foreground: #fafaf9;
  --popover: #1c1917;
  --popover-foreground: #fafaf9;
  --primary: #0ea5e9;
  --primary-foreground: #0c0a09;
  --secondary: #292524;
  --secondary-foreground: #fafaf9;
  --muted: #292524;
  --muted-foreground: #d6d3d1;
  --accent: #fbbf24;
  --accent-foreground: #0c0a09;
  --destructive: #ef4444;
  --border: #292524;
  --input: #292524;
  --ring: #0ea5e9;
  --chart-1: #0ea5e9;
  --chart-2: #fbbf24;
  --chart-3: #34d399;
  --chart-4: #fbbf24;
  --chart-5: #a78bfa;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    line-height: 1.6;
  }
  p, li, td, th, dd, dt, label, span {
    line-height: 1.6;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #d6d3d1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a29e;
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Selection color */
::selection {
  background: rgba(14, 165, 233, 0.2);
}

/* Animation utilities */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes pulse-soft {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

.animate-slide-in-left {
  animation: slideInLeft 0.5s ease-out forwards;
}

.animate-slide-in-right {
  animation: slideInRight 0.5s ease-out forwards;
}

.animate-pulse-soft {
  animation: pulse-soft 2s ease-in-out infinite;
}

/* Stagger animation delays */
.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }

/* ============================================
   DESIGN SYSTEM - UNIFIED COMPONENTS
   ============================================ */

/* Card Variants */
.card-feature {
  @apply bg-white border border-stone-200 rounded-xl p-6 h-full flex flex-col;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.03);
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.card-feature:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.04);
  border-color: #d1d5db;
}

.card-feature-guide {
  @apply bg-white border border-stone-200 rounded-xl p-6 h-full flex flex-col;
  border-top-width: 4px;
  border-top-color: #0284c7;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card-feature-guide:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.12);
}

.card-testimonial {
  @apply bg-white border-l-4 border-sky-500 rounded-r-xl p-6;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.card-highlight {
  @apply bg-white border border-stone-200 rounded-xl p-6 h-full flex flex-col;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

/* Stats - Unified Style */
.stat-card {
  @apply text-center p-4;
}

.stat-value {
  @apply text-3xl md:text-4xl font-extrabold text-sky-700 tracking-tight;
}

.stat-label {
  @apply text-sm text-stone-600 mt-2 font-semibold uppercase tracking-wide;
}

.stat-icon {
  @apply w-8 h-8 mx-auto mb-2 text-sky-500;
}

/* Dark variant for hero overlays */
.stat-card-dark {
  @apply text-center p-4 rounded-xl bg-black/30 backdrop-blur-sm;
}

.stat-value-dark {
  @apply text-3xl md:text-4xl font-bold text-white;
}

.stat-label-dark {
  @apply text-sm text-white/90 mt-1 font-medium;
}

.stat-icon-dark {
  @apply w-6 h-6 mx-auto mb-2 text-amber-400;
}

/* Section spacing */
.section-padding {
  @apply py-16 md:py-24;
}

.section-padding-sm {
  @apply py-12 md:py-16;
}

/* Container */
.container-tight {
  @apply max-w-4xl mx-auto px-4;
}

/* Buttons - Unified */
.btn-primary {
  @apply inline-flex items-center justify-center gap-2 px-6 py-3 
         bg-sky-700 text-white font-semibold rounded-lg
         hover:bg-sky-800 transition-all duration-200
         shadow-md hover:shadow-lg hover:shadow-sky-500/25;
}

.btn-secondary {
  @apply inline-flex items-center justify-center gap-2 px-6 py-3 
         bg-white text-stone-800 font-semibold rounded-lg border-2 border-white
         hover:bg-stone-100 hover:border-stone-200 transition-all duration-200
         shadow-lg shadow-black/20;
}

.btn-secondary-dark {
  @apply inline-flex items-center justify-center gap-2 px-6 py-3 
         bg-slate-800 text-white font-semibold rounded-lg
         hover:bg-slate-700 transition-all duration-200
         shadow-lg shadow-black/30;
}

.btn-outline {
  @apply inline-flex items-center justify-center gap-2 px-6 py-3 
         bg-white text-stone-800 font-semibold rounded-lg border border-stone-200
         hover:bg-stone-50 hover:border-stone-300 hover:shadow-md transition-all duration-200;
}

.btn-outline-dark {
  @apply inline-flex items-center justify-center gap-2 px-6 py-3 
         bg-white/10 text-white font-semibold rounded-lg border border-white/30
         hover:bg-white/20 hover:border-white/50 transition-all duration-200
         backdrop-blur-sm;
}

/* Icon wrapper - Unified */
.icon-wrapper {
  @apply w-12 h-12 rounded-xl bg-sky-100 flex items-center justify-center mb-4;
}

.icon-wrapper svg {
  @apply w-6 h-6 text-sky-700;
}

.icon-wrapper-enhanced {
  @apply w-14 h-14 rounded-2xl bg-gradient-to-br from-sky-100 to-sky-200 flex items-center justify-center mb-5 shadow-inner;
}

.icon-wrapper-enhanced svg {
  @apply w-7 h-7 text-sky-700;
}

.icon-wrapper-sm {
  @apply w-10 h-10 rounded-lg bg-sky-50 flex items-center justify-center;
}

.icon-wrapper-sm svg {
  @apply w-5 h-5 text-sky-600;
}

/* Step indicator */
.step-number {
  @apply w-10 h-10 rounded-full bg-sky-600 text-white flex items-center justify-center font-bold text-lg flex-shrink-0;
}

.step-card {
  @apply bg-white border border-stone-200 rounded-xl p-6 flex gap-4;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

/* Typography */
.heading-xl {
  @apply text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight;
}

.heading-lg {
  @apply text-3xl md:text-4xl font-bold tracking-tight;
}

.heading-md {
  @apply text-2xl md:text-3xl font-bold;
}

.heading-sm {
  @apply text-xl md:text-2xl font-semibold;
}

.text-body {
  @apply text-base text-stone-700 leading-relaxed;
}

.text-body-sm {
  @apply text-sm text-stone-700 leading-relaxed;
}

/* Badge styles */
.badge-primary {
  @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-sky-100 text-sky-700 border border-sky-200;
}

.badge-secondary {
  @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-stone-100 text-stone-700 border border-stone-200;
}

.badge-accent {
  @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-amber-100 text-amber-800 border border-amber-200;
}

.badge-accent {
  @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800;
}

/* Tag/Pill styles */
.tag {
  @apply inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-stone-100 text-stone-700 border border-stone-200;
}

/* Section backgrounds */
.bg-section-white {
  @apply bg-white;
}

.bg-section-muted {
  @apply bg-stone-50;
}

.bg-section-primary {
  @apply bg-sky-50;
}

/* Legacy - keep for compatibility */
.card-hover {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.15);
}

/* Button enhancements */
.btn-press {
  transition: transform 0.1s ease;
}

.btn-press:active {
  transform: scale(0.98);
}

/* Gradient text */
.gradient-text {
  background: linear-gradient(135deg, var(--primary) 0%, #0284c7 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Glass effect */
.glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.dark .glass {
  background: rgba(28, 25, 23, 0.7);
}

/* Focus styles for accessibility */
:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* Skip navigation link for accessibility */
.skip-nav {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  padding: 0.5rem 1rem;
  background: var(--primary);
  color: var(--primary-foreground);
  border-radius: var(--radius);
  font-weight: 500;
  transition: top 0.2s;
}

.skip-nav:focus {
  top: 1rem;
}

/* Ensure minimum touch target size (44px) */
button,
a,
[role="button"] {
  min-height: 44px;
  min-width: 44px;
}

/* Better focus for interactive elements */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: var(--radius);
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  html {
    scroll-behavior: auto;
  }
}

/* Class-based reduced motion support */
.reduce-motion *,
.reduce-motion *::before,
.reduce-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

.reduce-motion html {
  scroll-behavior: auto;
}

/* WCAG 1.4.12: Body text line-height must be >= 1.5x font size */
/* Tailwind's text-xl defaults to line-height 1.4 (28px/20px) — override for body text */
p, li, td, th, dd, dt, label, span, blockquote {
  line-height: 1.6;
}

/* Ensure text-xl and text-lg body text elements meet WCAG line-height */
main p,
main li,
main td,
main th,
main dd,
main blockquote {
  line-height: 1.6 !important;
}

/* Constrain paragraph text width for readability (fix wide text blocks >90 chars/line) */
main p {
  max-width: 75ch;
}

/* Standardize card border-radius: unify rounded-lg to match rounded-xl (12px) */
main .rounded-lg {
  border-radius: 0.75rem;
}
main .rounded-xl {
  border-radius: 0.75rem;
}

/* Mobile body text minimum 16px for readability */
@media (max-width: 768px) {
  body {
    font-size: 16px;
  }

  /* Nuclear mobile text fix: ALL body text elements must be ≥16px */
  main p, main li, main td, main th, main dd, main dt, main blockquote,
  main span, main label, main div, main a,
  footer p, footer li, footer span, footer a, footer div {
    font-size: max(1rem, 16px) !important;
    line-height: 1.6;
  }

  /* Override ALL Tailwind text-sm everywhere to 16px */
  .text-sm,
  main .text-sm,
  footer .text-sm,
  [class*="text-sm"] {
    font-size: 1rem !important; /* 16px */
    line-height: 1.6;
  }

  /* Override ALL Tailwind text-xs everywhere to 16px */
  .text-xs,
  main .text-xs,
  footer .text-xs,
  [class*="text-xs"] {
    font-size: 1rem !important; /* 16px */
    line-height: 1.5;
  }

  /* Ensure spans inside body text inherit parent size */
  main p span, main li span, main td span, main dd span {
    font-size: inherit !important;
  }

  /* text-body-sm uses text-sm, ensure it's readable on mobile */
  main .text-body-sm,
  .text-body-sm {
    font-size: 1rem !important; /* 16px */
    line-height: 1.6;
  }

  /* Badge text: ensure readable */
  .badge-primary, .badge-secondary, .badge-accent {
    font-size: 1rem !important; /* 16px */
  }

  /* Stat labels and tags */
  .stat-label, .tag {
    font-size: 1rem !important; /* 16px */
  }

  /* shadcn Card descriptions */
  [class*="CardDescription"],
  .text-muted-foreground {
    font-size: 1rem !important; /* 16px */
  }

  /* Prevent horizontal scroll */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }
}

/* Responsive table wrappers */
.desktop-table-wrapper {
  display: block;
}

.mobile-cards-wrapper {
  display: none;
}

@media (max-width: 767px) {
  .desktop-table-wrapper {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
  }
  
  .mobile-cards-wrapper {
    display: block !important;
  }
}

/* Table responsive wrapper */
.table-wrapper,
.overflow-x-auto {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  max-width: 100%;
}

.table-wrapper table,
.overflow-x-auto table {
  min-width: 100%;
}

/* Mobile table improvements */
@media (max-width: 640px) {
  .table-wrapper,
  .overflow-x-auto {
    margin-left: -0.5rem;
    margin-right: -0.5rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  .table-wrapper table,
  .overflow-x-auto table {
    font-size: 0.875rem; /* 14px min for mobile readability */
  }
  
  .table-wrapper th,
  .table-wrapper td,
  .overflow-x-auto th,
  .overflow-x-auto td {
    padding: 0.375rem;
    white-space: normal;
    word-wrap: break-word;
    max-width: 150px;
  }
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    font-size: 12pt;
    line-height: 1.5;
  }
  
  a {
    text-decoration: underline;
    color: #000;
  }
  
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 10pt;
  }
}
